<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>story events</name>
    <events>
        <include>gameplay stuff</include>
        <event-block sid="817314785781340">
            <conditions>
                <condition id="0" name="On function" sid="986386813652536" type="Function">
                    <param id="0" name="Name">&quot;first launch&quot;</param>
                </condition>
            </conditions>
            <actions />
        </event-block>
        <event-block sid="282292504480689">
            <conditions>
                <condition id="0" name="On function" sid="101239259300537" type="Function">
                    <param id="0" name="Name">&quot;time has passed&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <variable constant="0" name="deltaTime" sid="177755735675471" static="0" type="number">0</variable>
                <event-block sid="308852134587734">
                    <conditions />
                    <actions>
                        <action id="-9" name="Set value" sid="628856131065457" type="System">
                            <param id="0" name="Variable">deltaTime</param>
                            <param id="1" name="Value">Function.Param(0)</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="466886045074306">
                    <conditions />
                    <actions />
                </event-block>
            </sub-events>
        </event-block>
        <event-group description="" sid="863036200317594" title="AJAX request (Story)">
            <sub-events>
                <comment>Request the json once per day (it also triggers on the first start, for a New Game)</comment>
                <event-block sid="934392183261641">
                    <conditions>
                        <condition id="1" name="Is online" sid="846721641959368" type="Browser" />
                        <condition id="-7" inverted="1" name="Compare instance variable" sid="961771567704888" type="3storyJSON">
                            <param id="0" name="Instance variable">date</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">date.Date</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="1" name="Request project file" sid="390470154147478" type="AJAX">
                            <param id="0" name="Tag">&quot;story.json&quot;</param>
                            <param id="1" name="File">story.txt</param>
                        </action>
                        <action id="-10" name="Set value" sid="191775203687803" type="3storyJSON">
                            <param id="0" name="Instance variable">date</param>
                            <param id="1" name="Value">Date.Date</param>
                        </action>
                    </actions>
                </event-block>
                <comment>if the internet was down the first time you launched the game and the array is still empty, this will make sure you&apos;re quickly back on track by trying every 15 sec</comment>
                <event-block sid="484121997502294">
                    <conditions>
                        <condition id="70" name="Is Empty" sid="355472247943989" type="3storyJSON">
                            <param id="0" name="Reference point">0</param>
                            <param id="1" name="Key {n}"></param>
                        </condition>
                        <condition id="1" name="Is online" sid="354760909442845" type="Browser" />
                        <condition id="-6" name="Every X seconds" sid="598795862747915" type="System">
                            <param id="0" name="Interval (seconds)">15</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="1" name="Request project file" sid="476758344610784" type="AJAX">
                            <param id="0" name="Tag">&quot;story.json&quot;</param>
                            <param id="1" name="File">story.txt</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="240571591470516">
                    <conditions>
                        <condition id="0" name="On completed" sid="751458063359856" type="AJAX">
                            <param id="0" name="Tag">&quot;story.json&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="60" name="LoadJSON" sid="669486008255952" type="3storyJSON">
                            <param id="0" name="JSON">AJAX.LastData</param>
                            <param id="1" name="Reference point">0</param>
                            <param id="2" name="Key {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="556188440533073">
                    <conditions>
                        <condition id="1" name="On error" sid="253733252301136" type="AJAX">
                            <param id="0" name="Tag">&quot;story.json&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="765611765833961" type="Browser">
                            <param id="0" name="Type">1</param>
                            <param id="1" name="Message">&quot;Tried to retrieve silly messages but couldn&apos;t. Probably because internet connection is missing. Will try again later.&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="267972802124585">
                    <conditions>
                        <condition id="200" name="On JSON Parse Error" sid="484748881712678" type="3storyJSON" />
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="936555621740059" type="Browser">
                            <param id="0" name="Type">1</param>
                            <param id="1" name="Message">&quot;The Silly Message JSON is not formated properly.&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="207725341225783" title="state and display (Story)">
            <sub-events>
                <comment>Display when on a previous page</comment>
                <event-block sid="150330705192799">
                    <conditions>
                        <condition id="-7" inverted="1" name="Compare instance variable" sid="881984614455197" type="3storyJSON">
                            <param id="0" name="Instance variable">currentPage</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">3storyJSON.unlocked</param>
                        </condition>
                        <condition id="70" inverted="1" name="Is Empty" sid="564966556041990" type="3storyJSON">
                            <param id="0" name="Reference point">0</param>
                            <param id="1" name="Key {n}"></param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="966065816040273" type="3storyStatus">
                            <param id="0" name="Instance variable">string</param>
                            <param id="1" name="Value">&quot;Page &quot; &amp; 3storyJSON.currentPage+1</param>
                        </action>
                        <action id="-10" name="Set value" sid="158580340016897" type="3storyDisplay">
                            <param id="0" name="Instance variable">string</param>
                            <param id="1" name="Value">3storyJSON.Value(0, 3storyJSON.currentPage, &quot;text&quot;)</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Display when on page in progress (the latest unlocked)</comment>
                <event-block sid="575801268381648">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="365358651140810" type="3storyJSON">
                            <param id="0" name="Instance variable">currentPage</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">3storyJSON.unlocked</param>
                        </condition>
                        <condition id="70" inverted="1" name="Is Empty" sid="725236959386004" type="3storyJSON">
                            <param id="0" name="Reference point">0</param>
                            <param id="1" name="Key {n}"></param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="maxStoriesAvailable" sid="267133635551592" static="0" type="number">0</variable>
                        <variable constant="0" name="currentMessage" sid="176782844652238" static="0" type="text"></variable>
                        <event-block sid="209278545937750">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="780863155063684" type="System">
                                    <param id="0" name="Variable">maxStoriesAvailable</param>
                                    <param id="1" name="Value">3storyJSON.Size(0)</param>
                                </action>
                                <action id="-9" name="Set value" sid="539506111786242" type="System">
                                    <param id="0" name="Variable">currentMessage</param>
                                    <param id="1" name="Value">3storyJSON.Value(0, min(3storyJSON.unlocked, maxStoriesAvailable), &quot;text&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Do I really need this status??</comment>
                        <event-block sid="365026235180722">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="980892333958368" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;start&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="886052119075543" type="3storyStatus">
                                    <param id="0" name="Instance variable">string</param>
                                    <param id="1" name="Value">&quot;Welcome.&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="141120008702266" type="3storyDisplay">
                                    <param id="0" name="Instance variable">string</param>
                                    <param id="1" name="Value">&quot;&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="942534588317670" type="3storyJSON">
                                    <param id="0" name="Instance variable">timer</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="131905542415196">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="618968383824849" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;receiving...&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable constant="0" name="receiveTime" sid="603989519031269" static="0" type="number">0</variable>
                                <variable constant="0" name="completionRatio" sid="260593680634391" static="0" type="number">0</variable>
                                <event-block sid="137088574961600">
                                    <conditions />
                                    <actions>
                                        <action id="-9" name="Set value" sid="226479467613271" type="System">
                                            <param id="0" name="Variable">receiveTime</param>
                                            <param id="1" name="Value">3storyJSON.Value(0, 3storyJSON.unlocked, &quot;receive&quot;)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="578394163858845" type="System">
                                            <param id="0" name="Variable">completionRatio</param>
                                            <param id="1" name="Value">3storyJSON.timer/receiveTime</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="465667729982511" type="3storyStatus">
                                            <param id="0" name="Instance variable">string</param>
                                            <param id="1" name="Value">&quot;Receiving transmission... (&quot; &amp; round(3storyJSON.timer/receiveTime*100) &amp; &quot;%)&quot;</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="340617333913607" type="3storyDisplay">
                                            <param id="0" name="Instance variable">string</param>
                                            <param id="1" name="Value">Function.Call(&quot;story .displayReceive&quot;, currentMessage, completionRatio)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>when it&apos;s over</comment>
                                <event-block sid="764757488989010">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="670326981496766" type="3storyJSON">
                                            <param id="0" name="Instance variable">timer</param>
                                            <param id="1" name="Comparison">5</param>
                                            <param id="2" name="Value">receiveTime</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="824405483405464" type="3storyJSON">
                                            <param id="0" name="Instance variable">status</param>
                                            <param id="1" name="Value">&quot;received&quot;</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="345226154655828" type="3storyJSON">
                                            <param id="0" name="Instance variable">timer</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="935769181529758">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="893420544463086" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;received&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="843901610060118" type="3storyStatus">
                                    <param id="0" name="Instance variable">string</param>
                                    <param id="1" name="Value">&quot;Transmission received.&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="893356893774205">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="461453216836136" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;decoding...&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable constant="0" name="receiveTime" sid="208715584421923" static="0" type="number">0</variable>
                                <variable constant="0" name="completionRatio" sid="261787663682232" static="0" type="number">0</variable>
                                <event-block sid="711907015484077">
                                    <conditions />
                                    <actions>
                                        <action id="-9" name="Set value" sid="168919079607312" type="System">
                                            <param id="0" name="Variable">receiveTime</param>
                                            <param id="1" name="Value">3storyJSON.Value(0, 3storyJSON.unlocked, &quot;decode&quot;)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="122070211852513" type="System">
                                            <param id="0" name="Variable">completionRatio</param>
                                            <param id="1" name="Value">3storyJSON.timer/receiveTime</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="831576127728634" type="3storyStatus">
                                            <param id="0" name="Instance variable">string</param>
                                            <param id="1" name="Value">&quot;Decoding transmission... (&quot; &amp; round(completionRatio*100) &amp; &quot;%)&quot;</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="671657761720887" type="3storyDisplay">
                                            <param id="0" name="Instance variable">string</param>
                                            <param id="1" name="Value">Function.Call(&quot;story .displayDecode&quot;, currentMessage, completionRatio)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>when it&apos;s over</comment>
                                <event-block sid="814603317479448">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="549899211368480" type="3storyJSON">
                                            <param id="0" name="Instance variable">timer</param>
                                            <param id="1" name="Comparison">5</param>
                                            <param id="2" name="Value">receiveTime</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="761862950776407" type="3storyJSON">
                                            <param id="0" name="Instance variable">status</param>
                                            <param id="1" name="Value">&quot;decoded&quot;</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="523237956364968" type="3storyJSON">
                                            <param id="0" name="Instance variable">timer</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-11" name="Add to" sid="615317779929326" type="3storyJSON">
                                            <param id="0" name="Instance variable">unlocked</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="949521122031704">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="845944734462185" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;decoded&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="275891850707882" type="3storyStatus">
                                    <param id="0" name="Instance variable">string</param>
                                    <param id="1" name="Value">&quot;Transmission decoded. Awaiting order.&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="523044700959865">
                            <conditions>
                                <condition id="0" name="On function" sid="276032410872337" type="Function">
                                    <param id="0" name="Name">&quot;time has passed&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable constant="0" name="deltaTime" sid="404679279478935" static="0" type="number">0</variable>
                                <event-block any="1" sid="644347417404807">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="452456651104753" type="3storyJSON">
                                            <param id="0" name="Instance variable">status</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;receiving...&quot;</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="881281064653666" type="3storyJSON">
                                            <param id="0" name="Instance variable">status</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;decoding...&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="162223868103278" type="System">
                                            <param id="0" name="Variable">deltaTime</param>
                                            <param id="1" name="Value">Function.Param(0)</param>
                                        </action>
                                        <action id="-11" name="Add to" sid="272623057578029" type="3storyJSON">
                                            <param id="0" name="Instance variable">timer</param>
                                            <param id="1" name="Value">deltaTime</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>Error cases:</comment>
                <comment>When the JSON is empty</comment>
                <event-block sid="730002022199091">
                    <conditions>
                        <condition id="70" name="Is Empty" sid="286974887218279" type="3storyJSON">
                            <param id="0" name="Reference point">0</param>
                            <param id="1" name="Key {n}"></param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="message" sid="495177879787669" static="0" type="text"></variable>
                        <event-block sid="903502869057935">
                            <conditions>
                                <condition id="1" inverted="1" name="Is online" sid="940911970697401" type="Browser" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="906474883272367" type="System">
                                    <param id="0" name="Variable">message</param>
                                    <param id="1" name="Value">&quot;Please connect to the internet.&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="483242330754878">
                            <conditions>
                                <condition id="1" name="Is online" sid="920182164966835" type="Browser" />
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="872198148379374" type="System">
                                    <param id="0" name="Variable">message</param>
                                    <param id="1" name="Value">&quot;Connecting...&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="467228071700467">
                            <conditions />
                            <actions>
                                <action id="-10" name="Set value" sid="279120405391745" type="3storyDisplay">
                                    <param id="0" name="Instance variable">string</param>
                                    <param id="1" name="Value">message</param>
                                </action>
                                <action id="-10" name="Set value" sid="260290988127625" type="3storyStatus">
                                    <param id="0" name="Instance variable">string</param>
                                    <param id="1" name="Value">message</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="172925534387847" title="functions (Story)">
            <sub-events>
                <event-block sid="490422591897185">
                    <conditions>
                        <condition id="0" name="On function" sid="561381736452371" type="Function">
                            <param id="0" name="Name">&quot;story .displayReceive&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="string" sid="869996620348019" static="0" type="text"></variable>
                        <variable constant="0" name="ratio" sid="440632886590176" static="0" type="number">0</variable>
                        <variable constant="0" name="leftStr" sid="316821517268397" static="0" type="text"></variable>
                        <event-block sid="619105891333539">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="631794182467183" type="System">
                                    <param id="0" name="Variable">string</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action id="-9" name="Set value" sid="828522243570912" type="System">
                                    <param id="0" name="Variable">ratio</param>
                                    <param id="1" name="Value">Function.Param(1)</param>
                                </action>
                                <action id="-9" name="Set value" sid="558085844289468" type="System">
                                    <param id="0" name="Variable">leftStr</param>
                                    <param id="1" name="Value">left(string, ratio*len(string))</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="438073891016251">
                            <conditions />
                            <actions>
                                <action id="1" name="Set return value" sid="907045667646090" type="Function">
                                    <param id="0" name="Value"> RegexReplace(leftStr, &quot;\S&quot;, &quot;g&quot;, &quot;#&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="563591116091692">
                    <conditions>
                        <condition id="0" name="On function" sid="507285705563576" type="Function">
                            <param id="0" name="Name">&quot;story .displayDecode&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="s" sid="470998734169077" static="0" type="text"></variable>
                        <variable constant="0" name="ratio" sid="252283717089986" static="0" type="number">0</variable>
                        <variable constant="0" name="leftStr" sid="271953731430276" static="0" type="text"></variable>
                        <variable constant="0" name="rightStr" sid="376987106229674" static="0" type="text"></variable>
                        <event-block sid="923757796099426">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="554539111131294" type="System">
                                    <param id="0" name="Variable">s</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action id="-9" name="Set value" sid="997047026213906" type="System">
                                    <param id="0" name="Variable">ratio</param>
                                    <param id="1" name="Value">Function.Param(1)</param>
                                </action>
                                <action id="-9" name="Set value" sid="743609206097876" type="System">
                                    <param id="0" name="Variable">leftStr</param>
                                    <param id="1" name="Value">left(s, ratio*len(s))</param>
                                </action>
                                <action id="-9" name="Set value" sid="400117555071086" type="System">
                                    <param id="0" name="Variable">rightStr</param>
                                    <param id="1" name="Value">mid(s, ratio*len(s), Infinity)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="120442716487266">
                            <conditions />
                            <actions>
                                <action id="1" name="Set return value" sid="349024065045212" type="Function">
                                    <param id="0" name="Value"> leftStr &amp; RegexReplace(rightStr, &quot;\S&quot;, &quot;g&quot;, &quot;#&quot;)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="745508395870871" title="Controls and UI (Story)">
            <sub-events>
                <event-block sid="855821839646030">
                    <conditions>
                        <condition id="0" name="On function" sid="468278706853853" type="Function">
                            <param id="0" name="Name">&quot;story receive clicked&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="307629036364700">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="709835228918101" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;start&quot;</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="436252366346567" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;decoded&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="14" name="Log" sid="959428479286106" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;receive&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="459244211573671" type="3storyJSON">
                                    <param id="0" name="Instance variable">status</param>
                                    <param id="1" name="Value">&quot;receiving...&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="975000206199294">
                    <conditions>
                        <condition id="0" name="On function" sid="105676992878182" type="Function">
                            <param id="0" name="Name">&quot;story decode clicked&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="792261558916926" type="3storyJSON">
                            <param id="0" name="Instance variable">status</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;received&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="554445375715728" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;decode&quot;</param>
                        </action>
                        <action id="-10" name="Set value" sid="633088497996300" type="3storyJSON">
                            <param id="0" name="Instance variable">status</param>
                            <param id="1" name="Value">&quot;decoding...&quot;</param>
                        </action>
                        <action id="14" name="Log" sid="741332407451495" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">Function.ParamCount</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="225939164785426">
                    <conditions>
                        <condition id="0" name="On function" sid="786309732877267" type="Function">
                            <param id="0" name="Name">&quot;story .changePage&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <comment>Parameters : -1=left, 1=right</comment>
                        <variable constant="0" name="p" sid="129104324788606" static="0" type="number">0</variable>
                        <variable constant="0" name="availablePages" sid="381963870586928" static="0" type="number">0</variable>
                        <event-block sid="778262320657661">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="348458436078643" type="System">
                                    <param id="0" name="Variable">p</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action id="-9" name="Set value" sid="610033300100067" type="System">
                                    <param id="0" name="Variable">availablePages</param>
                                    <param id="1" name="Value">3storyJSON.Size(0)</param>
                                </action>
                                <action id="-11" name="Add to" sid="659356148760959" type="3storyJSON">
                                    <param id="0" name="Instance variable">currentPage</param>
                                    <param id="1" name="Value">p</param>
                                </action>
                                <action id="-10" name="Set value" sid="163917970007998" type="3storyJSON">
                                    <param id="0" name="Instance variable">currentPage</param>
                                    <param id="1" name="Value">clamp(3storyJSON.currentPage, 0, 3storyJSON.unlocked)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
